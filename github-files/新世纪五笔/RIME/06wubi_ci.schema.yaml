# Rime schema settings
# encoding: utf-8
# 20190707

schema:
  schema_id: 06wubi_ci
  name: "五笔"
  version: "1.0"
  author:
    - 方案制作 止于至善
  description: |
    新世纪五笔
  dependencies:
    - pinyin

switches:
  - name: ascii_mode
    reset: 0
  - name: zh_trad
    reset: 0
  - name: gb2312
    reset: 0
  - name: 06wb_spelling
    reset: 0
  - name: zhuyin
    reset: 1

engine:
  processors:
    - ascii_composer
    - recognizer
    - key_binder
    - speller
    - punctuator
    - selector
    - navigator
    - express_editor
  segmentors:
    - ascii_segmentor
    - matcher
    - affix_segmentor@mkst
    - affix_segmentor@rvlkwb
    - affix_segmentor@rvlkzy
    - abc_segmentor
    - punct_segmentor
    - fallback_segmentor
  translators:
    - punct_translator
    - reverse_lookup_translator
    - table_translator
    - table_translator@rwst
    - table_translator@mkst
    - table_translator@rvlkwb
    - table_translator@rvlkzy
    - history_translator@history
  filters:
    - charset_filter@gb2312
    - simplifier
    - reverse_lookup_filter@rvlkft
    - simplifier@06wb_spelling
    - simplifier@zhuyin
    - uniquifier

speller:
  auto_select: true
  auto_clear: max_length
  delimiter: "`"
  max_code_length: 4

history:
  input: z
  size: 1
  initial_quality: 10

translator:
  dictionary: 06wubi_ci.extended
  db_class: tabledb
  initial_quality: 1000
  enable_charset_filter: false
  enable_sentence: false
  enable_encoder: false
  encode_commit_history: false
  max_phrase_length: 9
  enable_completion: false
  enable_user_dict: false
  disable_user_dict_for_patterns:
    - "^z.*$"

rwst:
  __include: /translator
  initial_quality: 100
  enable_user_dict: true
  enable_encoder: true

mkst:
  __include: /translator
  initial_quality: 10
  enable_sentence: true
  prefix: '`'
  tips: 〔精准造词〕
  tag: mkst

rvlkzy:
  __include: /translator
  dictionary: 06wubi_dz.extended
  prefix: '~'
  tips: "〔以字查音〕"
  tag: rvlkzy

reverse_lookup:
  __include: /translator
  dictionary: pinyin
  preedit_format:
    - xform/([nl])v/$1ü/
    - xform/([nl])ue/$1üe/
    - xform/([jqxy])v/$1u/
  tag: rvlk

rvlkwb:
  __include: /reverse_lookup
  prefix: "z"
  tips: 〔拼音反查〕
  tag: rvlkwb
  extra_tags:
    - rvlk

rvlkft:
  dictionary: 06wubi_ci.extended
  tags:
    - rvlk

zhuyin:
  opencc_config: zhuyin.json
  option_name: zhuyin
  show_in_comment: true
  comment_format:
    - "xform/<br>/\r/"
    - "xform/&nbsp/ /"
  tags:
    - rvlkzy
  tips: all

06wb_spelling:
  opencc_config: 06wb_spelling.json
  option_name: 06wb_spelling
  show_in_comment: true
  comment_format:
    - "xform/<br>/\r/"
    - "xform/※※※/ /"
    - "xform/※/ /"
  tags:
    - abc
    - rvlkwb
  tips: all

simplifier:
  opencc_config: s2t.json
  option_name: zh_trad

charset_filter:
  option_name: gb2312

recognizer:
  patterns:
    rvlkzy: "~[a-y]*?$"
    rvlkwb: "^z[a-z]*'?$"
    mkst: '^[a-y]*`[a-y`]*$'
    punct: '^/([0-9]0?|[A-Za-z]+)$'
    email: "^[A-Za-z][-_.0-9A-Za-z]*@.*$"
    uppercase: "[A-Z][-_+.'0-9A-Za-z]*$"
    url: "^(www[.]|https?:|ftp[.:]|mailto:|file:).*$|^[a-z]+[.].+$"

key_binder:
  bindings:
    # ↓ 以下2條爲加減號翻頁
    - { when: has_menu, accept: minus, send: Page_Up }
    - { when: has_menu, accept: equal, send: Page_Down }
    # ↓ 以下2條爲  ；’ 選擇2、3候選項
    - { when: has_menu, accept: semicolon, send: 2 }
    - { when: has_menu, accept: apostrophe, send: 3 }
    # ↓ 以下2條爲空碼時按空格鍵清空輸入碼
    - { when: composing, accept: space, send: Escape }
    - { when: has_menu, accept: space, send: space }
    # ↓ 以下2條爲回車清空編碼
    - { when: composing, accept: Return, send: Escape }
    - { when: has_menu, accept: Return, send: Escape }
    # ↓ 以下2條爲左右方向鍵選擇候選項
    - { when: has_menu, accept: Left, send: Up }
    - { when: has_menu, accept: Right, send: Down }
    # ↓ 快捷鍵
    - { when: always, accept: Control+Shift+F, toggle: zh_trad }
    - { when: always, accept: Control+Shift+G, toggle: gb2312 }
    - { when: always, accept: Control+Shift+H, toggle: 06wb_spelling }

punctuator:
  half_shape:
    "!": {commit: "！"}
    "\"": {pair: ["“", "”"]}
    "#": "#"
    "$": ["￥", "$", "€", "£", "¥", "¢", "¤"]
    "%": ["%", "％", "°", "℃"]
    "&": "&"
    "'": {pair: ["‘", "’"]}
    "(": "（"
    ")": "）"
    "*": ["*", "＊", "·", "・", "×", "※", "❂"]
    "+": "+"
    ",": {commit: "，"}
    "-": "-"
    .: {commit: "。"}
    "/": ["/", "／", "÷", "、"]
    ":": {commit: "："}
    ";": {commit: "；"}
    "<": ["《", "〈", "«", "‹"]
    "=": "="
    ">": ["》", "〉", "»", "›"]
    "?": {commit: "？"}
    "@": "@"
    "[": ["「", "【", "〔", "［"]
    "\\": ["、", "\\", "＼"]
    "]": ["」", "】", "〕", "］"]
    "^": {commit: "……"}
    _: "——"
    "`": "`"
    "{": ["『", "〖", "｛"]
    "|": ["|", "｜", "·", "§", "¦"]
    "}": ["』", "〗", "｝"]
    "~": ["~", "～"]
  import_preset: symbols

ascii_composer:
  good_old_caps_lock: true
  switch_key:
    Shift_L: commit_code
    Shift_R: commit_code
    Control_L: noop
    Control_R: noop
    Caps_Lock: clear
    Eisu_toggle: clear

menu:
  page_size: 9
  # 候选项数量
