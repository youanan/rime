--[[
--æ— éšœç¢ç‰ˆä¸“ç”¨è„šæœ¬
--ç”¨é€”ï¼šå‰ªåˆ‡æ¿åˆ°æ‚¬æµ®çª—ï¼Œè¯»å–ä¸­æ–‡è¾“å…¥æ³•ä¸‹clipboard.jsonå‰ªåˆ‡æ¿æ–‡ä»¶å†…å®¹,å¹¶æ˜¾ç¤ºåœ¨æ‚¬æµ®çª—å£
--bug: å‰ªåˆ‡æ¿å†…å®¹\nä¼šè¢«æ¢æˆ
--ç‰ˆæœ¬å·: 1.0
â–‚â–‚â–‚â–‚â–‚â–‚â–‚â–‚
æ—¥æœŸ: 2020å¹´03æœˆ31æ—¥ğŸ—“ï¸
å†œå†: é¼ (åºšå­)å¹´ä¸‰æœˆåˆå…«
æ—¶é—´: 09:21:08ğŸ•˜
æ˜ŸæœŸ: å‘¨äºŒ
--åˆ¶ä½œè€…: é£ä¹‹æ¼«èˆ
--é¦–å‘qqç¾¤: åŒæ–‡å ‚(480159874)
--é‚®ç®±: bj19490007@163.com(ä¸ä¸€å®šåŠæ—¶çœ‹åˆ°)

--å¦‚ä½•å®‰è£…å¹¶ä½¿ç”¨: è¯·å‚è€ƒç¾¤æ–‡ä»¶ï¼Œè·¯å¾„[åŒæ–‡æ— éšœç¢LUAè„šæœ¬]->åŒæ–‡æ— éšœç¢ç‰ˆluaè„šæœ¬ä½¿ç”¨è¯´æ˜.pdf

--é…ç½®è¯´æ˜
ç¬¬â‘ æ­¥ å°† å‰ªåˆ‡æ¿åˆ°æ‚¬æµ®çª—.lua æ–‡ä»¶æ”¾ç½® rime/script æ–‡ä»¶å¤¹å†…

ç¬¬â‘¡æ­¥ å‘ä¸»é¢˜æ–¹æ¡ˆä¸­åŠ å…¥æŒ‰é”®
ä»¥ XXX.trime.yamlä¸»é¢˜æ–¹æ¡ˆä¸ºä¾‹
æ‰¾åˆ°ä»¥ä¸‹èŠ‚ç‚¹preset_keysï¼ŒåŠ å…¥ä»¥ä¸‹æŒ‰é”®

preset_keys:
  lua_cv_5: {label: â, send: function, command: 'å‰ªåˆ‡æ¿åˆ°æ‚¬æµ®çª—.lua', option: "5"} #å‰ªåˆ‡æ¿å†…å®¹åœ¨æ‚¬æµ®çª—æ˜¾ç¤º,æœ€å¤šæ˜¾ç¤º5ä¸ªå€™é€‰
  lua_cv_10: {label: â, send: function, command: 'å‰ªåˆ‡æ¿åˆ°æ‚¬æµ®çª—.lua', option: "10"} #å‰ªåˆ‡æ¿å†…å®¹åœ¨æ‚¬æµ®çª—æ˜¾ç¤º,æœ€å¤šæ˜¾ç¤º10ä¸ªå€™é€‰

å‘è¯¥æ–¹æ¡ˆä»»æ„æŒ‰é”®åŠ å…¥ä¸Šè¿°æŒ‰é”®æ—¢å¯
]]

require "import"
import "java.io.*"
import "android.content.Context" 
import "cjson"


local å‚æ•° = (...)
local å€™é€‰ä¸ªæ•° = tonumber(å‚æ•°)
local æ–‡ä»¶=tostring(service.getLuaDir("")).."/clipboard.json"
local å†…å®¹=io.open(æ–‡ä»¶):read("*a") --è¯»å–æ–‡ä»¶å…¨éƒ¨å†…å®¹
local json = require "cjson"
local å‰ªåˆ‡æ¿ç»„=json.decode(å†…å®¹) 
local å‰ªåˆ‡æ¿å­ç»„={}
   if #å‰ªåˆ‡æ¿ç»„>å€™é€‰ä¸ªæ•° then
    for i = 1,å€™é€‰ä¸ªæ•° do å‰ªåˆ‡æ¿å­ç»„[i]=å‰ªåˆ‡æ¿ç»„[i] end 
   else
    å‰ªåˆ‡æ¿å­ç»„=å‰ªåˆ‡æ¿ç»„
   end

task(100,function() service.addCompositions(å‰ªåˆ‡æ¿å­ç»„)  end)
  



